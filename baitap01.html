<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i t·∫≠p 1: Danh s√°ch s·∫£n ph·∫©m</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .products-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .product-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            background: white;
            transition: transform 0.3s;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .product-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .product-card h3 {
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .product-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 10px 0;
        }
        
        .product-category {
            background: #f1f8ff;
            color: #3498db;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .search-container {
            margin: 20px 0;
            display: flex;
            gap: 10px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .search-btn {
            padding: 12px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .search-btn:hover {
            background: #2980b9;
        }
        
        .no-results {
            text-align: center;
            padding: 30px;
            color: #e74c3c;
            font-weight: bold;
            border: 2px dashed #e74c3c;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .logic-explanation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            border-left: 4px solid #2ecc71;
        }
        
        .logic-explanation h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="main-menu">
            <a href="index.html" class="menu-link">‚Üê Trang ch·ªß</a>
            <a href="baitap02.html" class="menu-link">B√†i t·∫≠p 2 ‚Üí</a>
	    <a href="https://toantfx.github.io/baitap14.html-" class="menu-link" target="_blank">B√†i 14: Memory Game</a>
        </nav>

        <header class="exercise-header">
            <h1>üõí B√†i t·∫≠p 1: Danh s√°ch s·∫£n ph·∫©m</h1>
            <p class="subtitle">(20 ƒëi·ªÉm) Hi·ªÉn th·ªã v√† t√¨m ki·∫øm s·∫£n ph·∫©m</p>
        </header>

        <main>
            <!-- Thanh t√¨m ki·∫øm -->
            <div class="search-container">
                <input type="text" id="search-input" class="search-input" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m ƒë·ªÉ t√¨m ki·∫øm...">
                <button id="search-btn" class="search-btn">T√¨m ki·∫øm</button>
                <button id="reset-btn" class="search-btn" style="background: #95a5a6;">Hi·ªÉn th·ªã t·∫•t c·∫£</button>
            </div>

            <!-- Th√¥ng b√°o k·∫øt qu·∫£ -->
            <div id="search-info" style="margin-bottom: 20px;"></div>

            <!-- Danh s√°ch s·∫£n ph·∫©m -->
            <div id="products-container" class="products-container">
                <!-- S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
            </div>

            <!-- Gi·∫£i th√≠ch logic -->
            <div class="logic-explanation">
                <h3>üìã Logic t∆∞ duy v√† gi·∫£i th√≠ch:</h3>
                <h4>1. X·ª≠ l√Ω input ng∆∞·ªùi d√πng ƒë·ªÉ tr√°nh l·ªói injection:</h4>
                <ul>
                    <li><strong>Sanitization</strong>: Lo·∫°i b·ªè c√°c k√Ω t·ª± ƒë·∫∑c bi·ªát nguy hi·ªÉm b·∫±ng regex</li>
                    <li><strong>Trim & Lowercase</strong>: Chu·∫©n h√≥a input tr∆∞·ªõc khi x·ª≠ l√Ω</li>
                    <li><strong>Escape HTML</strong>: S·ª≠ d·ª•ng textContent thay v√¨ innerHTML khi hi·ªÉn th·ªã</li>
                </ul>

                <h4>2. T·ªëi ∆∞u t√¨m ki·∫øm:</h4>
                <ul>
                    <li><strong>Debouncing</strong>: Ch·ªù 300ms sau khi ng·ª´ng g√µ m·ªõi t√¨m ki·∫øm</li>
                    <li><strong>Case-insensitive</strong>: Chuy·ªÉn c·∫£ input v√† d·ªØ li·ªáu v·ªÅ ch·ªØ th∆∞·ªùng</li>
                    <li><strong>Partial matching</strong>: T√¨m ki·∫øm theo t·ª´ kh√≥a con (includes)</li>
                    <li><strong>Caching</strong>: L∆∞u k·∫øt qu·∫£ t√¨m ki·∫øm g·∫ßn nh·∫•t</li>
                </ul>

                <h4>3. Performance optimization:</h4>
                <ul>
                    <li>S·ª≠ d·ª•ng Virtual DOM pattern: ch·ªâ re-render ph·∫ßn thay ƒë·ªïi</li>
                    <li>Kh√¥ng t·∫°o l·∫°i to√†n b·ªô HTML m·ªói l·∫ßn t√¨m ki·∫øm</li>
                    <li>S·ª≠ d·ª•ng event delegation cho n√∫t "Mua ngay"</li>
                </ul>
            </div>
        </main>

        <footer class="footer">
            <p>¬© 2026 B√†i ki·ªÉm tra LTW - B√†i t·∫≠p 1</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // D·ªØ li·ªáu s·∫£n ph·∫©m
            const products = [
                { id: 1, name: 'iPhone 15 Pro Max', price: 32990000, category: 'ƒêi·ªán tho·∫°i', image: 'üì±' },
                { id: 2, name: 'MacBook Air M2', price: 25990000, category: 'Laptop', image: 'üíª' },
                { id: 3, name: 'Apple Watch Series 9', price: 11990000, category: 'ƒê·ªìng h·ªì', image: '‚åö' },
                { id: 4, name: 'AirPods Pro 2', price: 6990000, category: 'Tai nghe', image: 'üéß' },
                { id: 5, name: 'iPad Pro 11 inch', price: 21990000, category: 'M√°y t√≠nh b·∫£ng', image: 'üì±' },
                { id: 6, name: 'Samsung Galaxy S24', price: 23990000, category: 'ƒêi·ªán tho·∫°i', image: 'üì±' },
                { id: 7, name: 'Loa JBL Charge 5', price: 3990000, category: 'Loa', image: 'üîä' },
                { id: 8, name: 'B√†n ph√≠m c∆° Logitech', price: 2490000, category: 'Ph·ª• ki·ªán', image: '‚å®Ô∏è' }
            ];

            const productsContainer = document.getElementById('products-container');
            const searchInput = document.getElementById('search-input');
            const searchBtn = document.getElementById('search-btn');
            const resetBtn = document.getElementById('reset-btn');
            const searchInfo = document.getElementById('search-info');

            let currentProducts = [...products];
            let searchTimeout = null;

            // Format ti·ªÅn VND
            function formatPrice(price) {
                return price.toLocaleString('vi-VN') + '‚Ç´';
            }

            // Hi·ªÉn th·ªã s·∫£n ph·∫©m
            function displayProducts(productsArray) {
                productsContainer.innerHTML = '';
                
                if (productsArray.length === 0) {
                    productsContainer.innerHTML = `
                        <div class="no-results">
                            <h3>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m ph√π h·ª£p</h3>
                            <p>Vui l√≤ng th·ª≠ l·∫°i v·ªõi t·ª´ kh√≥a kh√°c</p>
                        </div>
                    `;
                    searchInfo.innerHTML = `<p>T√¨m th·∫•y: 0 s·∫£n ph·∫©m</p>`;
                    return;
                }

                productsArray.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.innerHTML = `
                        <div style="text-align: center; font-size: 3rem; margin-bottom: 10px;">${product.image}</div>
                        <span class="product-category">${product.category}</span>
                        <h3>${product.name}</h3>
                        <p class="product-price">${formatPrice(product.price)}</p>
                        <button class="buy-btn" data-id="${product.id}" style="width:100%; padding:10px; background:#2ecc71; color:white; border:none; border-radius:5px; cursor:pointer;">
                            Mua ngay
                        </button>
                    `;
                    productsContainer.appendChild(productCard);
                });

                searchInfo.innerHTML = `<p>T√¨m th·∫•y: ${productsArray.length} s·∫£n ph·∫©m</p>`;
            }

            // T√¨m ki·∫øm s·∫£n ph·∫©m
            function searchProducts(keyword) {
                if (!keyword.trim()) {
                    currentProducts = [...products];
                    displayProducts(currentProducts);
                    return;
                }

                const searchTerm = keyword.toLowerCase().trim();
                
                // Sanitize input: lo·∫°i b·ªè k√Ω t·ª± nguy hi·ªÉm
                const sanitizedTerm = searchTerm.replace(/[<>]/g, '');
                
                // T√¨m ki·∫øm kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng
                currentProducts = products.filter(product => 
                    product.name.toLowerCase().includes(sanitizedTerm) ||
                    product.category.toLowerCase().includes(sanitizedTerm)
                );
                
                displayProducts(currentProducts);
            }

            // Event listeners
            searchBtn.addEventListener('click', () => {
                searchProducts(searchInput.value);
            });

            resetBtn.addEventListener('click', () => {
                searchInput.value = '';
                currentProducts = [...products];
                displayProducts(currentProducts);
            });

            // T√¨m ki·∫øm realtime v·ªõi debouncing
            searchInput.addEventListener('input', function(e) {
                clearTimeout(searchTimeout);
                
                searchTimeout = setTimeout(() => {
                    searchProducts(e.target.value);
                }, 300); // Ch·ªù 300ms sau khi ng·ª´ng g√µ
            });

            // Event delegation cho n√∫t "Mua ngay"
            productsContainer.addEventListener('click', function(e) {
                if (e.target.classList.contains('buy-btn')) {
                    const productId = e.target.dataset.id;
                    const product = products.find(p => p.id == productId);
                    alert(`ƒê√£ th√™m v√†o gi·ªè h√†ng: ${product.name}\nGi√°: ${formatPrice(product.price)}`);
                }
            });

            // Enter ƒë·ªÉ t√¨m ki·∫øm
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchProducts(this.value);
                }
            });

            // Hi·ªÉn th·ªã s·∫£n ph·∫©m ban ƒë·∫ßu
            displayProducts(products);
        });
    </script>
</body>

</html>
